\chapter{Realisierung der Sprünge} \label{cha:sprunge}
Wie bereits oben erwähnt beinhalten unsere Szenarien nur wenige Sprünge. Die einzelnen Sprünge sind im folgenden aufgelistet und es wird beschrieben, wie diese in der GUI dargestellt werden. 

\subparagraph{Überspringen einzelner Fragen.} Der Benutzer kann in der GUI bei verschiedenen Fragen "`Egal"' auswählen, so dass diese nicht in Betracht gezogen werden.
\subparagraph{Die Frage ob das Sportangebot etwas kosten darf.} Der Benutzer hat hier die Möglichkeit, die Frage zu ignorieren, oder einen maximal Preis anzugeben. Das Ignorieren passiert hierbei durch eine Checkbox, die das Feld mit dem maximalen Preis aus- bzw. wieder anschaltet.
\subparagraph{Hat der Benutzer eine körperliche Einschränkung, so darf beim Sportangebot kein Körperkontakt bestehen.} Wählt der Benutzer eine Einschränkung, so wird die Auswahlmöglichkeit zum Körperkontakt automatisch auf "`Nein"' gestellt und er kann diese Auswahl nicht mehr ändern. Es sei denn er wählt sämtliche Einschränkungen wieder ab.
\subparagraph{Sprung zu einer beliebigen Frage.} Da der Benutzer sämtliche Auswahlkriterien zu jedem Zeitpunkt sehen kann, ist dieser Sprung nicht relevant.

In einem ersten Schritt wurden diese Sprünge, einfachheitshalber, fest in die GUI hineinprogrammiert. Diese Vorgehensweise ist zwar recht gut geeignet, falls die Szenarien nur wenige Sprüngen enthalten. Ab einer bestimmten Anzahl solcher Sprünge, wird jedoch eine andere Vorgehensweise benötigt, bei der die Sprünge nicht mehr hart-codiert sind, sondern möglichst dynamisch verändert werden können. Diese, im folgenden Abschnitt beschriebene, Vorgehensweise, wurde in einem zweiten Schritt umgesetzt.   

\section{Realisierung von mehreren Sprüngen}

Die Grundidee der Vorgehensweise, um mehrere Sprünge zu realisieren, ist es, verschiedene Personenarten in die Ontologie einzuführen und dann über die bereits angegebenen Auswahlkriterien zu bestimmen um welche Personenart es sich beim Benutzer handelt. Mit dieser Information kann sich die GUI entsprechend anpassen und kann bei Bedarf verschiedene Komponenten automatisch auswählen, hervorheben oder verstecken etc...

Als Beispiel sei hier die Personenart \lstinline"eingeschraenkte_Person" genannt. Hierbei handelt es sich um eine Unterklasse von \lstinline"Person" und besitzt als Property \lstinline"hat_Einschraenkung some koerperliche_Einschraenkung". Wählt der Benutzer nun als körperliche Einschränkung den Beinbereich aus, so wird eine Query an die Ontologie abgesetzt, die wie folgt aussieht: \lstinline"Person and hat_Einschraenkung some Beinbereich". Das Ergebnis dieser Query ist eben die Klasse \lstinline"eingeschraenkte_Person". Da die GUI nun weiß, dass es sich beim Benutzer um eine \lstinline"eingeschraenkte_Person" handelt, kann die Auswahloption des Körperkontakts, wie im Szenario beschrieben, auf \lstinline"Nein" gesetzt werden.

Um sämtliche, relevante Sprünge abzubilden wird noch die Personenart \lstinline"zahlende_Person" mit der Property \lstinline"will_zahlen only True" benötigt. Beim True handelt es sich um einen von uns eingeführten Boolean Wert. Dies ermöglicht es folgende Query abzusetzen: \lstinline"Person and (hat_Einschraenkung some Beinbereich or will_zahlen only True)". Das Ergebnis sind die beiden Personenarten \lstinline"eingeschraenkte_Person" und  \lstinline"zahlende_Person". Die GUI kann daraufhin auf die einzelnen Personenarten reagieren und wie oben beschrieben ihr Aussehen ändern. Ein Vorteil dieser Methode ist, dass man die Query beliebig mit der Oder-Verknüpfung erweitern kann, so dass man bei Bedarf weitere Kriterien aufnehmen kann.

In unseren Szenarien müssen zwei unabhängige Teile der GUI verändert werden, es ist jedoch vorstellbar, dass es Personenarten gibt, die gleichzeitig auftreten können, allerdings widersprüchliche Effekte in der GUI auslösen sollen. So könnte z.B. ein bestimmtes Feld für die eine Personenart aus- und für die andere Personenart angeschaltet werden. Wie solche Konflikte zu lösen sind, hängt von den konkreten Fällen ab. Ein möglicher Lösungsansatz wäre aber ein Priorisieren der verschiedenen Personenarten. Dies bedeutet, dass sich die Personenart mit der höheren Priorität durchsetzt und die GUI deren Effekte übernimmt. Die Prioritäten könnten auch vom Benutzer mitbestimmt werden, indem er festlegen kann, wie wichtig ihm verschiedene Auswahlkriterien sind.

\section{Realisierung von aufeinanderfolgenden Fragen}
Dieser Ansatz wurde nicht umgesetzt, wird aus Vollständigkeitsgründen dennoch erwähnt. Mit der Möglichkeit die Personenarten des Benutzers mittels der Ontologie zu bestimmen, ist es leicht möglich die Fragen aufeinanderfolgend abzubilden und weiterhin Sprünge zuzulassen. Hierbei erstellt man für jede Frage ein eigenes Panel \footnote{Mit Panel ist eine Komponente ähnlich dem JPanel gemeint, also ein GUI Standardcontainer, der zusammengehörige Bedienelemente gruppieren kann. \autocite{petri:jpanel}}, für das man Voraussetzungen festlegen kann. Bei diesen Voraussetzungen handelt es sich um keine, eine oder mehrere Personenarten. Diese Panels werden in einem Stack gespeichert und in dieser Reihenfolge verarbeitet. Dies bedeutet dass, nachdem eine Frage beantwortet wurde, das nächste Panel vom Stack geholt wird. Danach wird überprüft ob die Voraussetzungen erfüllt sind. Dies ist der Fall, falls die Personenarten des Benutzers eine Übermenge von den Personenarten der Voraussetzung bildet. \\
Falls die Voraussetzungen erfüllt sind, dann wird das Panel, also die Frage, dem Benutzer angezeigt. Sind die Voraussetzungen nicht erfüllt, dann wird das nächste Panel vom Stack geholt und überprüft. Dieser Vorgang wird solange weitergeführt, bis sich keinen Panels mehr auf dem Stack befinden, danach können die Sportarten, die zu den Auswahlkriterien des Benutzers passen, gesucht und angezeigt werden.

Als konkretes Beispiel soll die Frage, ob das Sportangebot etwas kosten darf oder nicht, dienen. Beantwortet der Benutzer diese Frage mit "`Ja"', so ermittelt die Ontologie, dass es sich, beim Benutzer, um eine \lstinline"zahlende_Person" handelt. Da diese Frage abgehandelt wurde, wird die nächste geladen, allerdings noch nicht angezeigt. Bei der nächsten Frage handelt es sich um die Angabe des maximal Preises. Diese Frage hat als Voraussetzung \lstinline"zahlende_Person", da sie nur für Benutzer relevant ist, die etwas zahlen möchten. Da eine der Personenarten des Benutzers mit der Voraussetzung der Frage übereinstimmt, wird diese dem Benutzer angezeigt. Wäre dies nicht der Fall, so würde die nächste Frage geladen werden.

\section{Schlussfolgerung zu den Sprüngen}
Da unsere Szenarien einfach gehalten sind, ist es ein größerer Aufwand, die Personenart zu bestimmen und dann die GUI zu verändern, als diese sofort zu verändern. Trotzdem ist es bereits zu erkennen, dass diese Vorgehensweise, die Arbeit erleichtert, sobald man komplexere Szenarien hat, in denen es kompliziert ist die Personenarten des Benutzers zu bestimmen und insbesondere die daraus folgenden Konsequenzen herzuleiten.